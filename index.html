<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <title>Rakaia Lions Bulbs</title>
</head>

<body>

  <!-- STEP 0: Home Page -->
  <img src="images/hero-image.png" alt="Yellow Strike Lily" class="hero-img">

  <div id="form-step-0">
    <h1>Rakaia Lions Bulbs</h1>
    <h3>Support your community - buy bulbs today!</h3>
    <button class="primary-btn" id="startOrderBtn">Order Now</button>

    <p>The Rakaia Lions Charitable Trust is proud to offer Lily and Freesia bulbs, generously donated by local bulb
      growers. These growers supply bulbs to commercial flower producers around the world and have chosen to support us.
    </p>

    <p>There are 12 varieties of lilies and 4 varieties of freesias available. Weâ€™re offering these bulbs at retail
      prices to raise funds for our trust:</p>

    <ul>
      <li>Lily Bulbs: $15 per bag (4 bulbs per bag)</li>
      <li>Freesia Bulbs: $7.50 per bag (20 bulbs per bag)</li>
    </ul>

    <p>You can purchase bulbs online via our order form or if you prefer to purchase in person we have a stand outside
      Rakaia Mobil. Orders are processed and sent out each Monday, so be sure to get your order in before 11pm Sunday
      night to make the weekly shipment.</p>

    <p>If you're part of a group or organisation interested in fundraising with our bulbs, weâ€™d love to hear from you.
      While the bulbs are sold here at retail prices, there is an opportunity for approved groups to purchase them at
      wholesale rates. To learn more, please contact the Rakaia Lions Treasurer directly:</p>

    <ul>
      <li>Bruce Kelly</li>
      <li>ðŸ“§ rakaia.treas@lionsclubs.org.nz</li>
      <li>ðŸ“ž 027 437 5040</li>
    </ul>
  </div>

  <!-- STEP 1: Order form -->
  <div id="form-step-1" class="hidden">
    <h2>Order Form</h2>
    <h3><strong>Bulbs are not available until late July.</strong></h3>
    <p>Fill out the form below. Once submitted, youâ€™ll receive a message with our bank transfer details. Please use your
      name as the payment reference.</p>

    <form id="orderFormStep1">
      <div class="product-grid">

        <div class="product-item">
          <img src="images/tisento.jpg" alt="Tisento Lily">
          <label>Tisento Lily</label>
          <select name="tisentoLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/siberia.png" alt="Bellville Lily">
          <label>Siberia Lily</label>
          <select name="siberiaLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/king-salmon.png" alt="Bellville Lily">
          <label>King Salmon Lily</label>
          <select name="kingSalmonLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/marengo.png" alt="Bellville Lily">
          <label>Marengo Lily</label>
          <select name="marengoLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/master.png" alt="Bellville Lily">
          <label>Master Lily</label>
          <select name="masterLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/pure-passion.png" alt="Bellville Lily">
          <label>Pure Passion Lily</label>
          <select name="purePassionLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/redford.jpg" alt="Redford Lily">
          <label>Redford Lily</label>
          <select name="redfordLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/sorbonne.jpg" alt="Sorbonne Lily">
          <label>Sorbonne Lily</label>
          <select name="sorbonneLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/concor.png" alt="Bellville Lily">
          <label>Concor D'or Lily</label>
          <select name="concorDorLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/bellville.jpg" alt="Bellville Lily">
          <label>Bellville Lily</label>
          <select name="bellvilleLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/bellville.jpg" alt="Bellville Lily">
          <label>Bell Lily</label>
          <select name="bellLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="product-item">
          <img src="images/yellow-strike.jpg" alt="Yellow Strike Lily">
          <label>Yellow Strike Lily</label>
          <select name="yellowStrikeLily">
            <option value="0">Quantity</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>
      </div>

      <div class="nav-buttons">
        <div class="left-button">
          <button type="button" id="prevToStep0Btn">Previous</button>
        </div>
        <div class="right-button">
          <button type="button" class="primary-btn" id="nextToStep2Btn">Next</button>
        </div>
      </div>
    </form>
  </div>

  <!-- STEP 2: Customer details -->
  <div id="form-step-2" class="hidden">
    <h2>Customer Information</h2>

    <form id="orderFormStep2">
      <label>First Name</label>
      <input type="text" name="firstName" required />

      <label>Last Name</label>
      <input type="text" name="lastName" required />

      <label>Email</label>
      <input type="email" name="email" required />

      <label>Phone Number</label>
      <input type="text" name="phone" required />

      <h2 class="shipping">Shipping Information</h2>

      <label>Street Address</label>
      <input type="text" name="address" required />

      <label>Apartment, unit (optional)</label>
      <input type="text" name="unit" />

      <label>Town/City</label>
      <input type="text" name="city" required />

      <label>Postal Code</label>
      <input type="text" name="postcode" required />

      <input type="hidden" name="total" id="totalField">

      <input type="hidden" name="order" id="orderField">

      <div id="order-summary" class="order-summary">
        <h3>Your Order</h3>
        <ul id="order-items"></ul>
        <p><strong>Total: $<span id="order-total">0.00</span></strong></p>
      </div>

      <div class="nav-buttons">
        <div class="left-button">
          <button type="button" id="prevBtn">Previous</button>
        </div>
        <div class="right-button">
          <button type="submit" class="primary-btn">Submit</button>
        </div>
      </div>
    </form>
  </div>

  <!-- STEP 3: Thank you message -->
  <div id="form-step-3" class="hidden">
    <h2>Thank you for your order!</h2>
    <p id="thankYouMessage">Your order has been received. Please transfer your total amount of <strong
        id="finalAmount">$0.00</strong>
      to:</p>
    <p>Bank Account Name: Rakaia Lions</p>
    <p>Bank Account Number: 03 1354 0432008 00</p>
    <p>Reference: Your Full Name</p>
    <p>You will also receive a confirmation email shortly.</p>
  </div>

  <footer>
    <img src="images/LCI_emblem_2color_web.png" alt="Lions Club International Emblem">
    <p>&copy; Rakaia Lions Club 2025</p>
  </footer>

</body>

</html>


<!-- JS Script -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
  emailjs.init("6URWzvPDCKvplKWVm");

  const steps = {
    0: document.getElementById('form-step-0'),
    1: document.getElementById('form-step-1'),
    2: document.getElementById('form-step-2'),
    3: document.getElementById('form-step-3'),
  };

  const orderItemsList = document.getElementById('order-items');
  const orderTotalEl = document.getElementById('order-total');
  const finalAmountEl = document.getElementById('finalAmount');

  const prices = {
    tisentoLily: 15,
    bellvilleLily: 15,
    redfordLily: 15,
    yellowStrikeLily: 15,
    kingSolomanLily: 15,
    sorbonneLily: 15,
    siberiaLily: 15,
    purePassionLily: 15,
    masterLily: 15,
    marengoLily: 15,
    concorDorLily: 15,
    bellLily: 15,
  };

  function showStep(stepToShow) {
    Object.values(steps).forEach(step => step.classList.add('hidden'));
    steps[stepToShow].classList.remove('hidden');
  }

  document.getElementById('startOrderBtn').addEventListener('click', () => showStep(1));
  document.getElementById('prevToStep0Btn').addEventListener('click', () => showStep(0));
  document.getElementById('prevBtn').addEventListener('click', () => showStep(1));

  document.getElementById('nextToStep2Btn').addEventListener('click', () => {
    try {
      const formData = new FormData(document.getElementById('orderFormStep1'));
      orderItemsList.innerHTML = '';
      let total = 0;
      let totalQuantity = 0;

      // List ordered items
      for (const [name, qty] of formData.entries()) {
        const quantity = parseInt(qty);
        if (quantity > 0 && prices[name]) {
          const itemTotal = quantity * prices[name];
          total += itemTotal;
          totalQuantity += quantity;

          const label = document.querySelector(`select[name="${name}"]`).previousElementSibling.textContent;
          const li = document.createElement('li');
          li.textContent = `${label}: ${quantity} Ã— $${prices[name].toFixed(2)} = $${itemTotal.toFixed(2)}`;
          orderItemsList.appendChild(li);
        }
      }

      // Calculate delivery cost based on quantity
      let deliveryCost = 0;
      if (totalQuantity > 0) {
        if (totalQuantity <= 5) deliveryCost = 15.00;
        else if (totalQuantity <= 10) deliveryCost = 12.00;
        else if (totalQuantity <= 15) deliveryCost = 9.00;
        else deliveryCost = 0; // Free delivery for > 15 items
      }

      // Show delivery cost
      if (deliveryCost > 0) {
        const deliveryLi = document.createElement('li');
        deliveryLi.textContent = `Delivery Cost: $${deliveryCost.toFixed(2)}`;
        orderItemsList.appendChild(deliveryLi);
      }

      total += deliveryCost;
      orderTotalEl.textContent = total.toFixed(2);

      showStep(2);

    } catch (err) {
      alert("There was an error processing your order. Please try again.");
      console.error(err);
    }
  });

  document.getElementById('orderFormStep2').addEventListener('submit', async (event) => {
    event.preventDefault();

    try {
      const form = event.target;

      // Create order summary text
      const orderSummary = Array.from(orderItemsList.querySelectorAll('li'))
        .map(li => li.textContent)
        .join('\n');

      document.getElementById('orderField').value = orderSummary;
      document.getElementById('totalField').value = orderTotalEl.textContent;

      // Send confirmation to customer
      await emailjs.sendForm(
        "service_ysispk8", "template_b8g295h", form,
        "6URWzvPDCKvplKWVm" // Public key
      );

      // Send order details to owner
      await emailjs.sendForm(
        "service_ysispk8", "template_nzusrii", form,
        "6URWzvPDCKvplKWVm" // Public key
      );

      showStep(3);
      finalAmountEl.textContent = orderTotalEl.textContent;

    } catch (error) {
      alert("There was an error submitting your order. Please try again.");
      console.error(error);
    }
  });
</script>
</body>

</html>